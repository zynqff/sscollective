<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>{% block title %}Сборник Стихов{% endblock %}</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;800&display=swap" rel="stylesheet">
    <style>
        :root {
            --accent-color: #38bdf8;
            --text-color: #374151;
        }

        body {
            font-family: 'Inter', sans-serif;
            background-color: #f9fafb;
        }

        pre.poem {
            white-space: pre-wrap;
            line-height: 1.6;
            font-family: inherit;
            font-size: 1rem;
            color: var(--text-color);
            margin: 0;
        }

        .modal {
            transition: opacity 0.3s ease-in-out;
            opacity: 0;
            visibility: hidden;
        }

        .modal.open {
            opacity: 1;
            visibility: visible;
        }

        .tab.active,
        .sort-btn.active {
            @apply bg-sky-500 text-white shadow-md;
        }

        .tab:not(.active),
        .sort-btn:not(.active) {
            @apply bg-white text-gray-700 hover:bg-gray-100;
        }

        .poem-card {
            transition: transform 0.2s ease, box-shadow 0.2s ease;
        }

        .poem-card:hover {
            transform: translateY(-2px);
            @apply shadow-lg;
        }

        .sort-arrow-icon {
            transition: opacity 0.2s ease, transform 0.2s ease;
            opacity: 0;
        }
    </style>
    {% block extra_css %}{% endblock %}
</head>
<body class="bg-gray-50 min-h-screen">
    <div id="notification-container"
        class="fixed top-0 left-1/2 -translate-x-1/2 mt-4 z-50 w-full max-w-sm space-y-2">
    </div>
    {% block header %}
    <div class="max-w-7xl mx-auto p-4 sm:p-6 lg:p-8">
        <header class="flex flex-col sm:flex-row justify-between items-center py-4 mb-8 border-b border-gray-200">
            <h1 class="text-4xl font-extrabold text-gray-900 mb-4 sm:mb-0">{% block page_title %}Сборник Стихов{% endblock %}</h1>
            <nav class="flex items-center space-x-4">
                {% if current_user %}
                    {% if current_user.is_admin %}
                    <span class="text-red-600 font-bold">Администратор</span>
                    <a href="{{ request.url_for('admin_panel') }}" class="text-red-600 hover:text-red-700 font-semibold">Панель админа</a>
                    {% endif %}
                    <a href="{{ request.url_for('profile_get') }}" class="text-gray-700 hover:text-sky-600 font-semibold">Профиль ({{ current_user.username }})</a>
                    <a href="{{ request.url_for('logout') }}" class="text-gray-700 hover:text-sky-600 font-semibold">Выйти</a>
                {% else %}
                    <a href="{{ request.url_for('login_get') }}" class="text-sky-500 hover:text-sky-600 font-semibold">Войти</a>
                    <a href="{{ request.url_for('register_get') }}" class="text-sky-500 hover:text-sky-600 font-semibold">Регистрация</a>
                {% endif %}
            </nav>
        </header>
    {% endblock %}
    
    {% block content %}{% endblock %}
    
    {% block modals %}{% endblock %}
    
    {% block scripts %}
    <script>
        function showNotification(message, type = 'success') {
            const container = document.getElementById('notification-container');
            const notification = document.createElement('div');
            notification.className = `p-3 rounded-lg shadow-md text-sm mb-2 opacity-0 transition-opacity duration-300`;

            if (type === 'success') {
                notification.classList.add('bg-green-500', 'text-white');
            } else if (type === 'error') {
                notification.classList.add('bg-red-500', 'text-white');
            } else { // Default to info
                notification.classList.add('bg-blue-500', 'text-white');
            }
            notification.textContent = message;

            container.prepend(notification); // Add to top

            setTimeout(() => {
                notification.classList.add('opacity-100');
            }, 10); // Small delay to trigger transition

            setTimeout(() => {
                notification.classList.remove('opacity-100');
                notification.classList.add('opacity-0');
                notification.addEventListener('transitionend', () => notification.remove());
            }, 3000); // Remove after 3 seconds
        }
    </script>
    {% endblock %}
    </div>
</body>
      </html>
